<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/notas-de-aprendizaje/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/notas-de-aprendizaje/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/notas-de-aprendizaje/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/notas-de-aprendizaje/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Probabilistic Data Structures | Notes</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Probabilistic Data Structures" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Keyvan Akbary learning notes" /> <meta property="og:description" content="Keyvan Akbary learning notes" /> <meta property="og:site_name" content="Notes" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Probabilistic Data Structures" /> <script type="application/ld+json"> {"@type":"WebPage","description":"Keyvan Akbary learning notes","url":"/notas-de-aprendizaje/talks/probabilistic-data-structures/","headline":"Probabilistic Data Structures","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/notas-de-aprendizaje/" class="site-title lh-tight"> Notes </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/notas-de-aprendizaje/articles/" class="nav-list-link">Articles</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/notas-de-aprendizaje/books/" class="nav-list-link">Books</a><ul class="nav-list "></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/notas-de-aprendizaje/talks/" class="nav-list-link">Talks</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/notas-de-aprendizaje/papers/" class="nav-list-link">Papers</a><ul class="nav-list "></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Notes" aria-label="Search Notes" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/sanrm/notas-de-aprendizaje" class="site-button" > Notas de aprendizaje en GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/notas-de-aprendizaje/talks/">Talks</a></li> <li class="breadcrumb-nav-list-item"><span>Probabilistic Data Structures</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="probabilistic-data-structures"> <a href="#probabilistic-data-structures" class="anchor-heading" aria-labelledby="probabilistic-data-structures"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a href="https://www.youtube.com/watch?v=F7EhDBfsTA8">Probabilistic Data Structures</a> </h1> <p>They allow you to do things in memory at scale for things you couldn’t do before with a very tiny memory footprint.</p> <p>Something you have to know is that you as a developer is that you have to accept a predictable level of inaccuracy.</p> <h2 id="bloom-filters"> <a href="#bloom-filters" class="anchor-heading" aria-labelledby="bloom-filters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bloom filters </h2> <p>For working out if something is in a set.</p> <p>With Java, a naive implementation could be using a <code class="language-plaintext highlighter-rouge">Set</code>.</p> <p>The problem is if we start adding loads of stuff into a <code class="language-plaintext highlighter-rouge">Set</code>. Insertion time gets slower, heap space in JVM get massive.</p> <p><a href="http://crystal.uta.edu/~mcguigan/cse6350/papers/Bloom.pdf">Space/Time Trade-offs in Hash Coding with Allowable Errors paper</a></p> <p>Parts of a Bloom filter:</p> <ul> <li>A bit array of size <em>n</em></li> <li><em>k</em> hash functions</li> </ul> <p>A Bloom filter can tell you if something is not there, and <em>maybe</em> if is there.</p> <p>Available in Google Guava library <code class="language-plaintext highlighter-rouge">com.google.guava:guava:19.0</code> as <code class="language-plaintext highlighter-rouge">BloomFilter</code>. There is an error rate of checking existence in the set. Adjusting this error size, affects insertion performance. The more accurate you want to be, the more hash functions you have.</p> <p>Use cases:</p> <ul> <li>“One hit wonders” If you visit a page once, content for you will be served from a Bloom filter. For any other case, we can serve you something more computationally expensive.</li> <li>Avoiding lookups (HBase, Cassandra)</li> <li>Real-time matching, real-time searches.</li> </ul> <h2 id="count-min-sketch"> <a href="#count-min-sketch" class="anchor-heading" aria-labelledby="count-min-sketch"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Count-min sketch </h2> <p>Slightly newer than Bloom filters. Similar use case, for checking membership. More used for count tracking (how many times something exists).</p> <p>If you were using a naive Java implementation for the problem, you can use a <code class="language-plaintext highlighter-rouge">HashMap</code>, or a <code class="language-plaintext highlighter-rouge">HashMultiset</code> (a <code class="language-plaintext highlighter-rouge">HashMap</code> with a key for the element, and an integer as a value counter).</p> <p>Same issues as before, insertion time and heap size gets bigger.</p> <p><a href="http://dimacs.rutgers.edu/~graham/pubs/papers/cmsoft.pdf">Approximating Data with the Count-Min Data Structure paper</a>.</p> <p>Initialising a sketch:</p> <ul> <li>Epsilon: accepted error added to counts with each item.</li> <li>Delta: Probability that estimate is outside accepted error.</li> </ul> <p>You can use <code class="language-plaintext highlighter-rouge">com.clearspring.analytics:stream:2.9.2</code> and <code class="language-plaintext highlighter-rouge">CountMinSketch</code>.</p> <p>Use cases:</p> <ul> <li>Any kind of frequency tracking!</li> <li>Natural Language Processing</li> <li>Extension: Heavy-hitters</li> <li>Extension: Range-query</li> </ul> <h2 id="hyperloglog"> <a href="#hyperloglog" class="anchor-heading" aria-labelledby="hyperloglog"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> HyperLogLog </h2> <p>Is used for cardinality, “in my list of things, how many unique items are there”. “What are my unique visitors to my site today”.</p> <p>Naively in Java we can do it with a Set again. Just retrieving back the unique elements inserted (not-repeated). <code class="language-plaintext highlighter-rouge">mySet.size()</code>.</p> <p>This is an implementation of a compound of papers:</p> <ul> <li>Linear counting, similar to Bloom filter: <a href="http://dblab.kaist.ac.kr/Publication/pdf/ACM90_TODS_v15n2.pdf">A Linear-Time Probabilistic Counting Algorithm for Database Applications paper</a></li> <li>LogLog counting: <a href="http://algo.inria.fr/flajolet/Publications/DuFl03-LNCS.pdf">Loglog Counting of Large Cardinalities paper</a></li> <li>HyperLogLog: <a href="http://algo.inria.fr/flajolet/Publications/FlFuGaMe07.pdf">HyperLogLog: the analysis of a near-optimal cardinality estimation algorithm paper</a></li> </ul> <p>You can use <code class="language-plaintext highlighter-rouge">com.clearspring.analytics:stream:2.9.2</code> and <code class="language-plaintext highlighter-rouge">HyperLogLog</code>.</p> <p>Use cases:</p> <ul> <li>Anywhere you need cardinality in O(n)!</li> <li>Unique site visitors</li> <li>Estimates of massive tables</li> <li>Streams of data</li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
